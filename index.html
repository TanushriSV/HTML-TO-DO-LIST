<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>To Do List</title>
<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap');
  body{
    font-family:'Comfortaa',cursive;
    background:#c2b180;
    background-size:400% 400%;animation:bg 20s infinite;
    min-height:100vh;
    position:relative;
  }
  @keyframes bg{0%,100%{background-position:0 50%}50%{background-position:100% 50%}}

  .glass{
    background:rgba(255,255,255,.95);
    backdrop-filter:blur(10px);
    border:0;
    box-shadow:0 10px 25px #0002
  }
  .stats-card{
    transition:.2s
  }
  .stats-card:hover{
    transform:translateY(-5px)
  }
  .sticky-note{
    border-radius:15px;
    box-shadow:0 10px 25px #0003;
    transform:rotate(-2deg);
    transition:.3s;
    margin-bottom:1rem
  }
  .sticky-note:nth-child(even){
    transform:rotate(2deg)
  }
  .sticky-note:hover{
    transform:rotate(0) scale(1.05);
    z-index:5
  }
  .sticky-note.completed{
    opacity:.6;
    transform:rotate(-5deg) scale(.95)
  }
  .sticky-note.completed .card-title{
    text-decoration:line-through
  }
  .priority-badge{
    position:absolute;
    top:-5px;right:-5px;
    border-radius:50%;
    width:25px;
    height:25px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:12px
  }
  .btn-action{
    border-radius:50%;
    width:36px;
    height:36px;
    display:flex;
    align-items:center;
    justify-content:center;
    transition: all 0.2s;
    border: 2px solid rgba(255,255,255,0.3);
  }
  .btn-action:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 15px rgba(0,0,0,0.2);
  }
  .filter-btn.active{
    background:linear-gradient(135deg,#8bc34a,#4dd0e1)!important;
    color:#fff!important;
    border:2px solid rgba(255,255,255,0.5)!important;
    transform: scale(1.05);
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  }
  .filter-btn {
    border-radius: 25px!important;
    transition: all 0.3s;
    margin: 3px;
  }
  
  .color-picker{
    cursor:pointer;
    width:30px;
    height:30px;
    border-radius:50%;
    border:2px solid #ddd
  }
  .color-picker.selected{
    border:3px solid #000;
    transform:scale(1.2)
    }
  .capybara-float {
    position: fixed;
    bottom: 20px;
    right: 20px;
    font-size: 5rem;
    animation: float 3s ease-in-out infinite;
    z-index: 1000;
    cursor: pointer;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
  }

  @keyframes float {
    0%, 100% { 
      transform: translateY(0px) rotate(-5deg); 
    }
    50% { 
      transform: translateY(-20px) rotate(5deg); 
    }
  }
</style>
</head>

<body>
<div class="container-fluid py-4">

  <!-- Header -->
  <div class="glass rounded-4 p-4 text-center mb-4">
    <h1 class="text-primary">ü¶´My Sticky To-Doü¶´</h1>
    <p id="currentDate" class="text-muted mb-0"></p>
    <small style="color: #8a7a8b;">Stay calm and organized like a capybara üßò‚Äç‚ôÄ</small>
  </div>
  <div class="row g-4">

    <!-- Sidebar -->
    <div class="col-lg-4">
      <div class="card glass rounded-4 p-5">
        <h5 class="text-center" style="color: #5d4e75; font-weight: 600;">
          <span style="font-size: 1.5rem;">üå±</span> Add New Task
        </h5>
        <form id="taskForm" class="mt-3">
          <input id="taskTitle" class="form-control mb-2" placeholder="Title" maxlength="50" required>
          <textarea id="taskDesc" class="form-control mb-2" placeholder="Description"></textarea>
          <input type="date" id="taskDate" class="form-control mb-2" required>
          <select id="taskPriority" class="form-select mb-2">
            <option value="low">üü¢ Low</option>
            <option value="medium">üü° Medium</option>
            <option value="high">üî¥ High</option>
          </select>
          <div class="d-flex gap-2 mb-3 flex-wrap">
            <div class="color-picker selected" style="background:#FFE066" data-color="#FFE066"></div>
            <div class="color-picker" style="background:#FF7979" data-color="#FF7979"></div>
            <div class="color-picker" style="background:#74B9FF" data-color="#74B9FF"></div>
            <div class="color-picker" style="background:#00D2D3" data-color="#00D2D3"></div>
            <div class="color-picker" style="background:#FD79A8" data-color="#FD79A8"></div>
            <div class="color-picker" style="background:#A29BFE" data-color="#A29BFE"></div>
            <div class="color-picker" style="background:#e1c6a8" data-color="#e1c6a8"></div>
          </div>
          <button class="btn w-100 text-white" style="background:linear-gradient(135deg,#ff6b6b,#4ecdc4)">+ Add Task</button>
        </form>
      </div>
    </div>

    <!-- Main -->
    <div class="col-lg-8">

      <!-- Stats -->
      <div class="row g-3 mb-3">
        <div class="col-6 col-md-3">
          <div class="card stats-card glass p-2 text-center">
            <i class="fas fa-tasks text-primary"></i>
            <h4 id="totalTasks">0</h4>
            <small>Total</small>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card stats-card glass p-2 text-center">
            <i class="fas fa-check-circle text-success"></i>
            <h4 id="completedTasks">0</h4>
            <small>Done</small>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card stats-card glass p-2 text-center">
            <i class="fas fa-clock text-warning"></i>
            <h4 id="pendingTasks">0</h4>
            <small>Pending</small>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card stats-card glass p-2 text-center">
            <i class="fas fa-calendar-day text-info"></i>
            <h4 id="todayTasks">0</h4>
            <small>Today</small>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="d-flex flex-wrap mb-4 justify-content-center">
        <button class="btn btn-outline-primary filter-btn active" data="all">All</button>
        <button class="btn btn-outline-info filter-btn" data="today">Today</button>
        <button class="btn btn-outline-warning filter-btn" data="pending">Pending</button>
        <button class="btn btn-outline-success filter-btn" data="completed">Done</button>
        <button class="btn btn-outline-danger filter-btn" data="high">High</button>
      </div>

      <!-- Tasks -->
      <div class="row" id="tasksContainer"></div>
    </div>
  </div>
</div>
<div class="capybara-float" onclick="playCapybaraSound()">ü¶´</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
let tasks=[],id=1,filter="all",color="#FFE066";
$(function(){
  $('#currentDate').text(new Date().toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'}));
  $('#taskDate').val(new Date().toISOString().split('T')[0]);
  $('.color-picker').click(function(){color=$(this).data('color');$('.color-picker').removeClass('selected');$(this).addClass('selected')});
  $('.filter-btn').click(function(){filter=$(this).attr('data');$('.filter-btn').removeClass('active');$(this).addClass('active');render()});
  $('#taskForm').submit(e=>{e.preventDefault();add()});
  sample();
});

function add(){
  let t={id:id++,title:$('#taskTitle').val(),description:$('#taskDesc').val(),date:$('#taskDate').val(),priority:$('#taskPriority').val(),color,completed:0};
  if(!t.title||!t.date)return alert('Missing fields');
  tasks.unshift(t);$('#taskForm')[0].reset();$('#taskDate').val(new Date().toISOString().split('T')[0]);render();
}

function toggle(i){let t=tasks.find(x=>x.id==i);t.completed^=1;render()}
function del(i){tasks=tasks.filter(x=>x.id!=i);render()}
function get(){
  let today=new Date().toISOString().split('T')[0];
  return filter=="all"?tasks:filter=="today"?tasks.filter(x=>x.date==today):
         filter=="completed"?tasks.filter(x=>x.completed):
         filter=="pending"?tasks.filter(x=>!x.completed):
         tasks.filter(x=>x.priority=="high");
}

function render(){
  let c=$('#tasksContainer'),f=get();
  if(!f.length)return c.html('<div class="col text-center text-white">No tasks</div>');
  c.html(f.map(t=>{
    let d=new Date(t.date).toLocaleDateString('en-US',{month:'short',day:'numeric'});
    let p={low:['üü¢','success'],medium:['üü°','warning'],high:['üî¥','danger']}[t.priority];
    return `<div class="col-md-6 col-lg-4"><div class="card sticky-note ${t.completed?'completed':''}" style="background:${t.color}">
      <div class="priority-badge bg-${p[1]}">${p[0]}</div>
      <div class="card-body"><div class="d-flex justify-content-between mb-2">
      <small class="fw-bold">${d}</small>
      <div><button class="btn btn-success btn-action btn-sm" onclick="toggle(${t.id})"><i class="fas fa-${t.completed?'undo':'check'}"></i></button>
      <button class="btn btn-danger btn-action btn-sm" onclick="del(${t.id})"><i class="fas fa-trash"></i></button></div></div>
      <h6 class="card-title fw-bold">${t.title}</h6><p class="small">${t.description||''}</p></div></div></div>`;
  }).join(''));
  $('#totalTasks').text(tasks.length);
  $('#completedTasks').text(tasks.filter(x=>x.completed).length);
  $('#pendingTasks').text(tasks.filter(x=>!x.completed).length);
  $('#todayTasks').text(tasks.filter(x=>x.date==new Date().toISOString().split('T')[0]&&!x.completed).length);
}

function sample(){
  tasks.push({id:id++,title:"Welcome üéâ",description:"This is your first sticky note!",date:new Date().toISOString().split('T')[0],priority:"medium",color:"#FFE066",completed:0});
  render();
}

const capybaraMessages = [
  "Stay calm like me ü¶´",
  "Don't forget to drink water üíß",
  "You got this! üí™",
  "One task at a time ‚ú®",
  "Take a deep breath üåø",
  "Capybara loves you ‚ù§"
];
function playCapybaraSound() {
  const floatingCapy = document.querySelector('.capybara-float');

  // Pick random message
  const msg = capybaraMessages[Math.floor(Math.random() * capybaraMessages.length)];

  // Create bubble
  let bubble = document.createElement("div");
  bubble.textContent = msg;
  bubble.style.position = "fixed";
  bubble.style.bottom = "120px";
  bubble.style.right = "40px";
  bubble.style.background = "rgba(255,255,255,0.95)";
  bubble.style.padding = "10px 15px";
  bubble.style.borderRadius = "20px";
  bubble.style.boxShadow = "0 4px 10px rgba(0,0,0,0.2)";
  bubble.style.fontFamily = "'Comfortaa', cursive";
  bubble.style.transition = "opacity 0.5s, transform 0.5s";
  bubble.style.zIndex = "2000";
  document.body.appendChild(bubble);

  // Animate in
  bubble.style.opacity = "1";
  bubble.style.transform = "translateY(0)";

  // Remove after 3s
  setTimeout(() => {
    bubble.style.opacity = "0";
    bubble.style.transform = "translateY(-20px)";
    setTimeout(() => bubble.remove(), 500);
  }, 3000);

  // Reset animation + emoji
  floatingCapy.style.animation = 'none';
  setTimeout(() => {
    floatingCapy.style.animation = 'float 3s ease-in-out infinite';
  }, 100);
}
</script>
</body>
</html>